# Изменения в OAuth аутентификации

## Что было изменено

### ✅ Переход с Google OAuth на Яндекс OAuth

1. **Обновлен основной код** (`main.py`):
   - Заменены Google OAuth endpoints на Яндекс OAuth endpoints
   - Обновлена логика получения данных пользователя
   - Изменены поля базы данных (`google_id` → `yandex_id`)
   - Обновлены URL маршруты (`/auth/google` → `/auth/yandex`)

2. **Обновлены зависимости** (`requirements.txt`):
   - Удалена библиотека `authlib` (не нужна для Яндекс OAuth)
   - Оставлены только необходимые: `fastapi`, `uvicorn`, `PyJWT`, `httpx`

3. **Обновлена документация** (`README.md`):
   - Изменено описание с Google на Яндекс
   - Обновлены инструкции по настройке
   - Добавлена информация о Яндекс API
   - Обновлены примеры и архитектурные диаграммы

4. **Добавлена инструкция по настройке** (`SETUP.md`):
   - Пошаговая инструкция по регистрации приложения в Яндексе
   - Описание структуры данных пользователя
   - Решение возможных проблем
   - Рекомендации для продакшена

5. **Обновлен общий README проекта**:
   - Изменены описания с Google на Яндекс
   - Обновлены примеры использования
   - Добавлены ссылки на Яндекс OAuth документацию

## Ключевые отличия Яндекс OAuth от Google OAuth

### API Endpoints:
- **Google**: `https://accounts.google.com/o/oauth2/v2/auth`
- **Яндекс**: `https://oauth.yandex.ru/authorize`

### Структура данных пользователя:
- **Google**: `sub`, `email`, `name`, `picture`
- **Яндекс**: `id`, `default_email`, `real_name`, `default_avatar_id`

### Scopes:
- **Google**: `openid email profile`
- **Яндекс**: `login:email login:info`

## Как использовать

1. **Настройте Яндекс OAuth**:
   - Перейдите на https://oauth.yandex.ru/client/new
   - Создайте приложение с callback URI: `http://localhost:8000/auth/yandex/callback`
   - Получите Client ID и Client Secret

2. **Обновите конфигурацию**:
   ```python
   YANDEX_CLIENT_ID = "ваш-client-id"
   YANDEX_CLIENT_SECRET = "ваш-client-secret"
   ```

3. **Запустите приложение**:
   ```bash
   cd Primer_auth/oauth_auth
   pip install -r requirements.txt
   python main.py
   ```

4. **Протестируйте**:
   - Откройте http://localhost:8000
   - Нажмите "Войти через Яндекс"
   - Авторизуйтесь и проверьте профиль

## Преимущества перехода на Яндекс

1. **Русскоязычная аудитория**: Яндекс популярен в России и СНГ
2. **Простота настройки**: менее сложная процедура регистрации приложения
3. **Локальная поддержка**: лучшее понимание российского рынка
4. **Интеграция с экосистемой**: возможность интеграции с другими сервисами Яндекса

